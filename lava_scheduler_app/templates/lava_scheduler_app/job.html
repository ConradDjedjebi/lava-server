{% extends "lava_scheduler_app/job_sidebar.html" %}

{% block content %}
<h2>Dispatcher Log Summary</h2>
{% if job_has_error %}
<div id="dispatcher-error">
<h3>Dispatcher error or test failure</h3>
<pre>{{ job_errors }}</pre>
</div>
{% endif %}
<h3>Dispatcher Log messages (file size = {{ job_file_size|filesizeformat }})</h3>
<span class="logbuttons">
{% for level in levels %}
{% if level.1 %}
  <input type="checkbox" checked="checked" id="{{ level.0 }}"/><label for="{{ level.0 }}">{{ level.0 }}</label>
{% endif %}
{% endfor %}
</span>
{% for log in job_log_messages %}
<pre class="log {{log.0}}">{{ log.1 }}</pre>
{% endfor %}

<script type="text/javascript">
$('.logbuttons input').button()
$('.logbuttons input').click(function () {
    var nodes = $('pre.' + $(this).attr('id'));
    if ($(this).is(':checked')) {
      nodes.show();
    } else {
      nodes.hide();
    }
  }
)
</script>
{% endblock %}

