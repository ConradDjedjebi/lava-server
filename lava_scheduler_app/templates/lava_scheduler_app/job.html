{% extends "layouts/content_with_sidebar.html" %}


{% block extrahead %}
{{ block.super }}
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}lava-server/css/demo_table_jui.css"/>
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}lava-scheduler/css/scheduler.css"/>
<script type="text/javascript" src="{{ STATIC_URL }}lava-server/js/jquery.dataTables.min.js"></script>
{% endblock %}


{% block sidebar %}
<h2>Job information</h2>
<dl>
    <dt>Submitted by:</dt>
    <dd>{{ job.submitter }}</dd>

    {% if job.requested_device %}
    <dt>Requested device:</dt>
    <dd>{{ job.requested_device }}</dd>
    {% endif %}

    {% if job.requested_device_type %}
    <dt>Requested type:</dt>
    <dd>{{ job.requested_device_type }}</dd>
    {% endif %}

    {% if job.description %}
    <dt>Description:</dt>
    <dd>{{ job.description }}</dd>
    {% endif %}
     <dt>Status:</dt>
    <dd>{{ job.get_status_display }}</dd>

    {% if job.actual_device %}
    <dt>On device:</dt>
    <dd>{{ job.actual_device }}</dd>
    {% endif %}
     <dt>Submitted at:</dt>
    <dd>{{ job.submit_time }}</dd>

    <dt>Started at:</dt>
    <dd>{{ job.start_time|default:"not started" }}</dd>

    <dt>Finished at:</dt>
    <dd>{{ job.end_time|default:"not finished" }}</dd>
</dl>
<h2>Links</h2>
<ul>
    <li>
        <a href="{% url lava.scheduler.job.log_file job.pk %}">View Dispatcher Log File</a>
    </li>
    <li>
        <a href="{% url lava.scheduler.job.definition job.pk %}">View Job Defintion File</a>
    </li>
    {% if job.results_link %}
    <li>
        <a href="{{ job.results_link }}">Results Bundle</a>
    </li>
    {% endif %}

</ul>
<h2>Actions</h2>
{% if show_cancel %}
<form method="POST"
      action="{% url lava.scheduler.job.cancel job.pk %}">
  {% csrf_token %}
  <button id="cancel-button">Cancel Job</button>
</form>
{% endif %}
{% if show_reload_page %}
<form method="GET"
      action="{{ job.get_absolute_url }}">
  <button id="reload-button">Reload Page</button>
</form>

{% endif %}
{% endblock %}


{% block content %}
<h2>Dispatcher Log Summary</h2>
{% if job_has_error %}
<div id="dispatcher-error">
<h3>Dispatcher error or test failure</h3>
<pre>{{ job_errors }}</pre>
</div>
{% endif %}
<h3>Dispatcher INFO & WARNING Logs (file size = {{ job_file_size|filesizeformat }})</h3>
<pre>{{ job_info_logs }}</pre>
{% endblock %}
