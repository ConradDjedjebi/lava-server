{% extends "lava_scheduler_app/job_sidebar.html" %}

{% block extrahead %}
{{ block.super }}
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}lava_scheduler_app/css/logfile.css"/>
{% endblock %}

{% block content %}
<h2>Dispatcher log file - {{ job.id }} </h1>
<a href="{% url lava.scheduler.job.log_file.plain job.pk %}">Download as text file</a>

<div class="logfile_content">
{% for section in sections %}
<a name="entry{{ forloop.counter0 }}"></a>
{% if section.0 == 'log' %}
{% if section.1 > 20 and not forloop.last %}
<a href="#entry{{ forloop.counter }}">skip {{ section.1 }} lines to next log entry &rarr;</a>
{% endif %}
<pre class="dispatcher_log">
{{ section.2|join:"" }}
</pre>
{% endif %}
{% if section.0 == 'traceback' %}
<pre class="traceback_log">
{{ section.2|join:"" }}
</pre>
{% endif %}
{% if section.0 == 'console' %}
<pre class="console_log">
{{ section.2|join:"" }}
</pre>
{% endif %}
{% endfor %}
</div>
{% endblock %}
