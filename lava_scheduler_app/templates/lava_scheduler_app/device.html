{% extends "lava_scheduler_app/_content.html" %}

{% block extrahead %}
{{ block.super }}
<style type="text/css">
.column {
    position: relative;
    float: left;
    padding-right: 2em;
    padding-bottom: 1em;
}
#tab-output pre {
    margin: 0;
}
.skip {
    color:red;
}
</style>
{% endblock %}

{% block content %}
<h2>Device {{ device.hostname }}</h2>

<div id="columns">
  <div class="column">
    <dt>Hostname:</dt>
    <dd>{{ device.hostname }}</dd>

    <dt>Device type:</dt>
    <dd>{{ device.device_type }}</dd>
  </div>
  <div class="column">
    <dt>Status:</dt>
    <dd>{{ device.get_status_display }}</dd>

{% if device.current_job %}
    <dt>Currently running:</dt>
    <dd><a href="">Job {{ device.current_job.id }}</a></dd>
{% endif %}
  </div>
  <div style="clear: both"></div>
</div>

<table class="data display">
  <thead>
    <tr>
      <th class="id">ID</th>
      <th>Status</th>
      <th>Device</th>
      <th>Submitter</th>
      <th>Start Time</th>
      <th>Finish Time</th>
    </tr>
  </thead>
  <tbody>
    {% for job in recent_jobs %}
    <tr>
      <td><a href="{% url lava_scheduler_app.views.job pk=job.pk %}">{{ job.id }}</a></td>
      <td>{{ job.get_status_display }}</td>
      <td>{{ job.actual_device }}</td>
      <td>{{ job.submitter }}</td>
      <td>{{ job.start_time }}</td>
      <td>{{ job.end_time|default:"not started" }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<script>
$(document).ready(
  function() {
    $("table.data").dataTable({
      "bJQueryUI": true,
      "aoColumnDefs": [
        { "sType": "num-html", "aTargets": [ "id" ] }
      ],
      "aaSorting": [[4, 'desc', 4]]
    });
  }
);
</script>

{% endblock %}
