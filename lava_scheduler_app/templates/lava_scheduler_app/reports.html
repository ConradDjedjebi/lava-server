{% extends "lava_scheduler_app/_content.html" %}

{% block content %}

<div style="display:inline-block; padding-left:20px;">
<h2>Daily Health Job Summary</h2>

<div id="placeholder-daily" style="width:300px;height:200px;"></div>
<script type="text/javascript">
$(document).ready(function() {
var dpass = [];
var dfail = [];
var ddates= [];
{% for day in health_day_report %}
  dpass.push([{{forloop.counter0}}, {{day.pass}}]);
  dfail.push([{{forloop.counter0}}, {{day.fail}}]);
  ddates.push([{{forloop.counter0}}, '{{day.date}}']);
{% endfor %}

  var ddata = [
    {'label': 'Fail', 'data': dfail, 'color': '#FF0000'},
    {'label': 'Pass', 'data': dpass, 'color': '#00FF00'},
  ];

  $.plot($("#placeholder-daily"), ddata, {
    series: {
      stack: true,
      bars: { show: true, barWidth: 0.6 },
    },
    xaxis: {
      ticks: ddates,
    },
  });
}
);
</script>
</div>

<div style="display:inline-block; padding-left:40px;">
<h2>Weekly Health Job Summary</h2>

<div id="placeholder-weekly" style="width:300px;height:200px;"></div>
<script type="text/javascript">
$(document).ready(function() {
var wpass = [];
var wfail = [];
var wdates= [];
{% for week in health_week_report %}
  wpass.push([{{forloop.counter0}}, {{week.pass}}]);
  wfail.push([{{forloop.counter0}}, {{week.fail}}]);
  wdates.push([{{forloop.counter0}}, '{{week.date}}']);
{% endfor %}

  var wdata = [
    {'label': 'Fail', 'data': wfail, 'color': '#FF0000'},
    {'label': 'Pass', 'data': wpass, 'color': '#00FF00'},
  ];

  $.plot($("#placeholder-weekly"), wdata, {
    series: {
      stack: true,
      //lines: { show: true, fill: true, steps: false },
      bars: { show: true, barWidth: 0.6 },
    },
    xaxis: {
      ticks: wdates,
    },
  });
}
);
</script>
</div>

{% endblock %}
