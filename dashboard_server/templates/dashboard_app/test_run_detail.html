{% extends "base.html" %}
{% load i18n %}
{% load humanize %}


{% block title %}
| {% trans "Test Runs" %}
| {{ test_run }}
{% endblock %}


{% block breadcrumbs %}
<li><a href="{% url dashboard_app.views.bundle_stream_list %}">{% trans "Bundle Streams" %}</a></li>
<li><a href="{{ test_run.bundle.bundle_stream.get_absolute_url }}">{{ test_run.bundle.bundle_stream }}</a></li>
<li><a href="{{ test_run.get_absolute_url }}">{{ test_run }}</a></li>
{% endblock %}


{% block sidebar %}
<dl>
  <dt>{% trans "Test Name" %}</dt>
  <dd>{{ test_run.test }}</dd>
  <dt>{% trans "OS Distribution" %}</dt>
  <dd>{{ test_run.sw_image_desc|default:"<i>Unspecified</i>" }}</dd>
  <dt>{% trans "Bundle information" %}</dt>
  <dd>{{ test_run.bundle.content_sha1 }}</dd>
  <dt>{% trans "Time check performed" %}</dt>
  <dd>{{ test_run.time_check_performed|yesno }}</dd>
  <dt>{% trans "Log analyzed on:" %}</dt>
  <dd>
  {{ test_run.analyzer_assigned_date|naturalday }}
  {{ test_run.analyzer_assigned_date|time }}
  </dd>
  <dt>{% trans "Data uploaded on:" %}</dt>
  <dd>
  {{ test_run.import_assigned_date|naturalday }}
  {{ test_run.import_assigned_date|time }}
  </dd>
</dl>
{% endblock %}


{% block content %}
<table class="data">
  <tr>
    <th>#</th>
    <th>{% trans "Test case" %}</th>
    <th>{% trans "Result" %}</th>
    <th>{% trans "Measurement" %}</th>
  </tr>
  {% for test_result in test_results.object_list %}
  <tr>
    <td width="1%">{{ forloop.counter }}</td>
    <td>{{ test_result.test_case }}</td>
    <td>
      <img src="{{ MEDIA_URL }}assets/images/icon-{{ test_result.result_code }}.png" 
      alt="{{ test_result.get_result_display }}" width="16" height="16" />
      {{ test_result.get_result_display }}
    </td>
    {% if test_result.measurement %}
    <td>{{ test_result.measurement|default_if_none:"" }} {{ test_result.units }}</td>
    {% endif %}
  </tr>
</table>

<div class="pagination">
  <span class="step-links">
  {% if test_results.has_previous %}
  <a href="?page={{ start_page }}">Home</a> 
  <a href="?page={{ test_results.previous_page_number }}">previous</a>
  {% endif %}

  <span class="current">
  Page {{ test_results.number }} of {{ test_results.paginator.num_pages }}
  </span>

  {% if test_results.has_next %}
  <a href="?page={{ test_results.next_page_number }}">next</a>
  <a href="?page={{ end_page }} ">LastPage</a>
  {% endif %}
  </span>
</div>

{% endblock %}
