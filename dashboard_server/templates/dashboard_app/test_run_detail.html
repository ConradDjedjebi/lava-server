{% extends "base.html" %}
{% load i18n %}
{% load humanize %}


{% block title %}
| {% trans "Test Runs" %}
| {{ test_run }}
{% endblock %}


{% block breadcrumbs %}
<li>{{ test_run.analyzer_assigned_uuid }}</li>
{% endblock %}


{% block sidebar %}
<table border=1 >
  <tr>
    <th colspan="6">{% trans "Test ID" %}</th>
    <td> {{ test_run.test_id }} </td> 
  </tr>

  <tr>
    <th colspan="6">{% trans "OS Distribution" %}</th>
    <td> {{test_run.sw_image_desc}} </td> 
  </tr>

  <tr>
    <th colspan="6">{% trans "Bundle information" %}</th>
    <td> Bundle {{ test_run.bundle_id }} [{{test_run.bundle.content_filename}}] </td> 
  </tr>

  <tr>
    <th colspan="6">{% trans "Time check performed" %}</th>
    {% if test_run.time_check_performed %}
        <td> Yes  </td> 
    {%else%}
        <td> No </td>
    {%endif%}
  </tr>

  <tr>
    <th colspan="6">{% trans "Date/Time of Test Run" %}</th>
    <td> {{ test_run.analyzer_assigned_date|naturalday }} 
         {{ test_run.analyzer_assigned_date|time }}</td> 
  </tr>

  <tr>
    <th colspan="6">{% trans "Date/Time of Test Results upload" %}</th>
    <td> {{ test_run.import_assigned_date|naturalday }} 
         {{ test_run.import_assigned_date|time }}</td> 
  </tr>
</table >
{% endblock %}


{% block content %}
 <table class="data">
    <tr><th colspan="3">Test Results for [{{ test_run.test }}]</th></tr>
          <tr>
             <th>Test case</th>
             <th>Test result</th>
             <th>Measurement</th>
          </tr>
        {% for test_result in test_run.test_results.all %}
           <tr>
             <td width="35%">{{test_result.test_case}}</td>
             <td>
                {% ifequal test_result.get_result_display "pass" %}
                   <div style="background-color: green; color: white; ">
                {% else %}{% ifequal test_result.get_result_display "fail" %}
                   <div style="background-color: red;">
                {% else %}{% ifequal test_result.get_result_display "skip" %}
                   <div style="background-color: yellow;">
                {% else %}{% ifequal test_result.get_result_display "unknown" %}
                   <div style="background-color: orange;">
                {% endifequal %}
                {% endifequal %}
                {% endifequal %}
                {% endifequal %}
                     {{test_result.get_result_display|upper}}
                   </div>
             </td>

             <td>
                {% if test_result.units  %}
                  {{ test_result.measurement}} ({{test_result.units}})
                {% else %}{% if test_result.measurement %}
                  {{test_result.measurement}}
                {% else %} 
                   NA 
                {% endif %}
                {% endif %}
             </td>
           </tr>
        {% endfor %}
 </table>
{% endblock %}
