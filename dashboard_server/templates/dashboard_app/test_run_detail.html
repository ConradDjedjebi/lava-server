{% extends "base.html" %}
{% load i18n %}
{% load humanize %}


{% block title %}
| {% trans "Test Runs" %}
| {{ test_run }}
{% endblock %}


{% block breadcrumbs %}
<li>{{ test_run.analyzer_assigned_uuid }}</li>
{% endblock %}


{% block sidebar %}
  <dl>
     <dt>Test ID </dt>
     <dd> {{ test_run.test_id }}</dd>
     <dt>OS Distribution </dt>
     <dd> {{test_run.sw_image_desc}}</dd>
     <dt>Bundle information</dt>
     <dd>
         Bundle {{ test_run.bundle_id }} 
         [{{test_run.bundle.content_filename}}]
     </dd>
     <dt> Time check performed </dt>
     <dd>
        {% if test_run.time_check_performed %}
           Yes
        {%else%}
           No
        {%endif%}
     </dd>
     <dt>Date/Time of Test Run</dt>
     <dd>
         {{ test_run.analyzer_assigned_date|naturalday }}
         {{ test_run.analyzer_assigned_date|time }}
     </dd>
     <dt>Date/Time of Test Results upload</dt>
     <dd> {{ test_run.import_assigned_date|naturalday }} 
          {{ test_run.import_assigned_date|time }}</td> 
     </dd>
  </dl>
{% endblock %}


{% block content %}
 <table class="data">
    <tr><th colspan="3">Test Results for [{{ test_run.test }}]</th></tr>
          <tr>
             <th>Test case</th>
             <th>Test result</th>
             <th>Measurement</th>
          </tr>
        {% for test_result in test_run.test_results.all %}
           <tr>
             <td width="35%">{{test_result.test_case}}</td>
                {% ifequal test_result.get_result_display "pass" %}
                   <td class="result-pass">
                {% else %}{% ifequal test_result.get_result_display "fail" %}
                   <td class="result-fail">
                {% else %}{% ifequal test_result.get_result_display "skip" %}
                   <td class="result-skip">
                {% else %}{% ifequal test_result.get_result_display "unknown" %}
                   <td class="result-unknown">
                {% endifequal %}
                {% endifequal %}
                {% endifequal %}
                {% endifequal %}
                     {{test_result.get_result_display|upper}}
                   </td>
             </td>

             <td>
                {% if test_result.units  %}
                  {{ test_result.measurement}} ({{test_result.units}})
                {% else %}{% if test_result.measurement %}
                  {{test_result.measurement}}
                {% else %} 
                   NA 
                {% endif %}
                {% endif %}
             </td>
           </tr>
        {% endfor %}
 </table>
{% endblock %}
