{% extends "layouts/content-bootstrap.html" %}
{% load i18n %}


{% block content %}
<h2>Hi {% firstof user.first_name user.username %}</h2>
<div class="row">
  <div class="col-md-6">
    <h4 class="modal-header">Personal information</h4>
    <dl class="dl-horizontal">
      <dt>Full name</dt>
      <dd>{{ user.get_full_name|default:"??" }}</dd>
      <dt>Username</dt>
      <dd>{{ user.username }}</dd>
      <dt>Email</dt>
      <dd>{{ user.email }}</dd>
      <dt>Password</dt>
      <dd><a href="{% url 'django.contrib.auth.views.password_change' %}"><span class="glyphicon glyphicon-lock"></span> Update</a></dd>
    </dl>
  </div>

  <div class="col-md-6">
    <h4 class="modal-header">Groups</h4>
    {% if user.groups.all %}
    <p>You are member of the following LAVA groups:</p>
    <ul>
    {% for g in user.groups.all %}
      {% if g.user_set.all|length > 1 %}
      <li><b>{{ g.name }}</b> group:
      <ul>
          {% for u in g.user_set.all %}
              {% if u != user %}
                <li>{{ u.username }}</li>
              {% endif %}
          {% endfor %}
      </ul>
      {% else %}
      <li><b>{{ g.name }}</b> group.</li>
      {% endif %}
      </li>
    {% endfor %}
    {% else %}
    <p>You are not member of any group.</p>
    {% endif %}
    </ul>
  </div>
</div>
<div class="row">
  <div class="col-md-6">
    <h4 class="modal-header">Personal reports</h4>
    <ul>
      <li><a href="{% url 'lava.scheduler.myjobs' %}">Your jobs</a></li>
      <li><a href="{% url 'dashboard_app.views.mybundlestreams' %}">Your bundle streams</a></li>
      <li><a href="{% url 'lava.scheduler.mydevice_list' %}">Your devices</a></li>
    </ul>
  </div>
</div>

{% endblock %}
