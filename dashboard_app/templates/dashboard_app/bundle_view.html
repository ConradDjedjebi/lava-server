{% extends "base.html" %}
{% load i18n %}
{% load humanize %}
{% load pagination_tags %}

{% block extrahead %}
{{ block.super }}
<script type="text/javascript" src="{{ STATIC_URL }}lava/js/jquery-1.5.1.min.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}lava/js/jquery-ui-1.8.12.custom.min.js"></script>
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}lava/css/Aristo/jquery-ui-1.8.7.custom.css"/>
{% endblock %}

{% block title %}
{{ block.super }} | {% trans "Streams" %} | {% trans "Bundle Stream" %} {{ bundle.bundle_stream.pathname }}
{% endblock %}


{% block breadcrumbs %}
<li><a href="{% url dashboard_app.views.bundle_stream_list %}">{% trans "Bundle Streams" %}</a></li>
<li><a href="{{ bundle_stream.get_absolute_url }}">{{ bundle_stream }}</a></li>
{% endblock %}


{% block sidebar %}
{% endblock %}


{% block content %}

{% autopaginate test_run_list %}
{% if invalid_page %}
  <h3>{% trans "There were no test runs in this bundle." %}</h3>
{% else %}
  {% if test_run_list.count %}
  <table class="data">
    <tr>
      <th>
        {% trans "Uploaded On" %}
        <div style="font-size:smaller">
          {% trans "most recent first" %}
        </div>
      </th>
      <th>{% trans "Analyzed" %}</th>
      <th>{% trans "Test" %}</th>
      <th>{% trans "Run" %}</th>
      <th>{% trans "Pass" %}</th>
      <th>{% trans "Fail" %}</th>
      <th>{% trans "Skip" %}</th>
      <th>{% trans "Unknown" %}</th>
    </tr>
    {% for test_run in test_run_list %}
    <tr>
      <td>
        {{ test_run.bundle.uploaded_on|naturalday }}
        {{ test_run.bundle.uploaded_on|time }}
      </td>
      <td>
        {{ test_run.analyzer_assigned_date|timesince }}
        {% trans "ago" %}
      </td>
      <td>{{ test_run.test }}</td>
      <td><a href="{{ test_run.get_absolute_url }}">{{ test_run }}</a></td>
      {% with test_run.get_summary_results as summary %}
      <td>{{ summary.pass|default:0 }}</td>
      <td>{{ summary.fail|default:0 }}</td>
      <td>{{ summary.skip|default:0 }}</td>
      <td>{{ summary.unknown|default:0 }}</td>
      {% endwith %}
    </tr>
    {% endfor %}
  </table>
  {% else %}
  <p>{% trans "There were no test runs in this bundle." %}</p>
  {% endif %}
{% paginate %}
{% endif %}

{% endblock %}
